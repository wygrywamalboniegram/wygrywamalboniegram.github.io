
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://unpkg.com/jquery"></script>
	<script src="https://unpkg.com/survey-jquery@1.9.42/survey.jquery.min.js"></script>
	<link href="https://unpkg.com/survey-core@1.9.42/defaultV2.min.css" type="text/css" rel="stylesheet" />
	<link rel="stylesheet" href="./index.css"><script src="https://unpkg.com/easy-autocomplete"></script><link rel="stylesheet" href="https://unpkg.com/easy-autocomplete@1.3.5/dist/easy-autocomplete.css">
    <script src="https://unpkg.com/surveyjs-widgets@1.9.42/surveyjs-widgets.min.js"></script>
		
    <title>Nominacje</title>
  </head>
  <body>
<!-- Button trigger modal -->


  <main role="main" class="container">

<div>
	  <h1>TOP 50 Gier Wszechczas√≥w (2022) - NOMINACJE</h1> 
	  
 <div id="surveyElement" style="display:inline-block;width:100%;"></div>
    <div id="surveyResult"></div>
    <script type="text/javascript" src="./index.js"></script>
  
  </main><!-- /.container -->
  
	
	<script>
	Survey.StylesManager.applyTheme("defaultV2");
	//survey.firstPageIsStarted = true;

var surveyJSON =  {
  "elements": [
    {
      "name": "N1",
      "title": "Nominacja:",
      "type": "text",
      "hasNone": true,
      "choicesByUrl": {
        "url": "autocomplete/nominowane",
        "valueName": "name"
      }
    },
	{
      "name": "N2",
      "title": "Nominacja:",
      "type": "text",
      "hasNone": true,
	  "visibleIf": "{N1}notempty",
      "choicesByUrl": {
        "url": "autocomplete/nominowane",
        "valueName": "name"
      }
    }
  ]
};


//survey.firstPageIsStarted = true;

function sendDataToServer(survey, options) {
    //send Ajax request to your web server.
	options.showDataSaving();
	$.ajax({
		url: 'https://script.google.com/macros/s/AKfycbxYC-DeF-667TpNdXRMPeXZaaSb8L6TcHir_VqYRqEPXrFKDNzSbFcz2d6mmZ8BFx0/exec',
		type: 'post',
		data: JSON.stringify(survey.data),
		headers: {
			"Content-Type": "text/plain"
		},
		processData: false,
		complete: function(res, status) {
			if (status == 'success') {
				options.showDataSavingSuccess();
			}else {
				options.showDataSavingError();
			}
		},
	});

	//alert("The results are:" + JSON.stringify(survey.data));
}


var survey = new Survey.Model(surveyJSON);

$("#surveyElement").Survey({
    model: survey,
    onComplete: sendDataToServer
});
	</script>
  </body>
</html>